{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nlet MoviesComponent = class MoviesComponent {\n  constructor(movieService, cd) {\n    this.movieService = movieService;\n    this.cd = cd;\n    this.searchInput = '';\n    this.searchResults = [];\n    this.showDropdown = false;\n    this.highlightedIndex = -1;\n    this.curUser = {\n      _id: '',\n      userName: '',\n      password: '',\n      admin: false,\n      disabled: false,\n      want: [],\n      watched: []\n    };\n  }\n  ngOnInit() {\n    this.userName = \"admin\";\n    this.password = \"admin\";\n    this.loginView();\n  }\n  login() {\n    this.movieService.login(document.getElementById(\"userInput\").value, document.getElementById(\"passInput\").value).subscribe(user => {\n      if (user) {\n        //console.log(\"logged in\",user);\n        this.todoView();\n        this.curUser = user;\n        this.updateUserlist();\n        this.updateUser(this.curUser);\n      }\n    });\n  }\n  logout() {\n    //console.log(\"LOGOUT\");\n    //reset local data\n    this.curUser = {\n      _id: '',\n      userName: '',\n      password: '',\n      admin: false,\n      disabled: false,\n      want: [],\n      watched: []\n    };\n    this.loginView();\n  }\n  printmovies() {\n    console.log(\"USER MOVIES ARE\");\n    console.log(this.curUser.want);\n    console.log(this.curUser.watched);\n  }\n  addWatched() {\n    //console.log(\"searching for\", this.searchInput);\n    //this.printmovies();\n    this.movieService.watchlistMovie(this.searchInput).subscribe(results => {\n      this.curUser = results;\n      this.updateLists();\n    });\n  }\n  onInputChange() {\n    if (this.searchInput.length > 2) {\n      this.movieService.searchMovie(this.searchInput).pipe(debounceTime(300), distinctUntilChanged()).subscribe(results => {\n        this.searchResults = results;\n        this.showDropdown = true;\n      });\n    }\n  }\n  updateLists() {\n    //reset todoTable\n    let todoTable = document.getElementById(\"todoTable\");\n    let todoBody = todoTable.querySelector('tbody');\n    while (todoBody.firstChild) {\n      todoBody?.removeChild(todoBody.firstChild);\n    }\n    //reset watchedTable\n    let watchedTable = document.getElementById('watchedTable');\n    let watchedBody = watchedTable.querySelector('tbody');\n    while (watchedBody.firstChild) {\n      watchedBody?.removeChild(watchedBody.firstChild);\n    }\n    let wantMovies = this.curUser.want;\n    let watchedMovies = this.curUser.watched;\n    //Want Table Setup\n    wantMovies.forEach(movie => {\n      let row = document.createElement('tr');\n      let c1 = row.appendChild(document.createElement('td'));\n      c1.innerHTML = movie.title; //div\n      let c2 = row.appendChild(document.createElement('td'));\n      let btn = document.createElement('button');\n      btn.type = 'button';\n      btn.className = 'btn';\n      btn.style.color = \"black\";\n      btn.style.backgroundColor = \"lightgrey\";\n      btn.style.border = \"5px black solid\";\n      btn.style.borderRadius = \"30%\";\n      btn.innerHTML = 'Add Watched';\n      btn.addEventListener('click', () => {\n        this.addWatched(movie);\n      });\n      c2.appendChild(btn); //div\n      let c3 = row.appendChild(document.createElement('td'));\n      let btn2 = document.createElement('button');\n      btn2.type = 'button';\n      btn2.className = 'btn';\n      btn2.style.color = \"black\";\n      btn2.style.backgroundColor = \"lightgrey\";\n      btn2.style.border = \"5px black solid\";\n      btn2.style.borderRadius = \"30%\";\n      btn2.addEventListener('click', () => {\n        this.seeDetails(\"want\", movie);\n      });\n      btn2.innerHTML = 'See Details';\n      c3.appendChild(btn2); //div\n      let c4 = row.appendChild(document.createElement('td'));\n      let btn3 = document.createElement('button');\n      btn3.type = 'button';\n      btn3.className = 'btn';\n      btn3.style.color = \"black\";\n      btn3.style.backgroundColor = \"lightgrey\";\n      btn3.style.border = \"5px black solid\";\n      btn3.style.borderRadius = \"30%\";\n      btn3.addEventListener('click', () => {\n        this.remove(\"want\", movie);\n      });\n      btn3.innerHTML = 'Remove';\n      c4.appendChild(btn3);\n      document.getElementById('todoTable').getElementsByTagName('tbody')[0].appendChild(row);\n    });\n    //Watched table setup\n    watchedMovies.forEach(movie => {\n      let row = document.createElement('tr');\n      let c1 = row.appendChild(document.createElement('td'));\n      c1.innerHTML = movie.title;\n      let c2 = row.appendChild(document.createElement('td'));\n      c2.innerHTML = (\"\" + movie.watchDate).substring(0, 10);\n      let c3 = row.appendChild(document.createElement('td'));\n      let btn = document.createElement('button');\n      btn.type = 'button';\n      btn.className = 'btn';\n      btn.style.color = \"black\";\n      btn.style.backgroundColor = \"lightgrey\";\n      btn.style.border = \"5px black solid\";\n      btn.style.borderRadius = \"30%\";\n      btn.addEventListener('click', () => {\n        this.rewatch(movie);\n      });\n      btn.innerHTML = \"Rewatch\";\n      c3.appendChild(btn);\n      let c4 = row.appendChild(document.createElement('td'));\n      let btn3 = document.createElement('button');\n      btn3.type = 'button';\n      btn3.className = 'btn';\n      btn3.style.color = \"black\";\n      btn3.style.backgroundColor = \"lightgrey\";\n      btn3.style.border = \"5px black solid\";\n      btn3.style.borderRadius = \"30%\";\n      btn3.addEventListener('click', () => {\n        this.seeDetails('', movie);\n      });\n      btn3.innerHTML = 'See Details';\n      c4.appendChild(btn3);\n      let c5 = row.appendChild(document.createElement('td'));\n      let btn4 = document.createElement('button');\n      btn4.type = 'button';\n      btn4.className = 'btn';\n      btn4.style.color = \"black\";\n      btn4.style.backgroundColor = \"lightgrey\";\n      btn4.style.border = \"5px black solid\";\n      btn4.style.borderRadius = \"30%\";\n      btn4.addEventListener('click', () => {\n        this.remove(\"watched\", movie);\n      });\n      btn4.innerHTML = 'Remove';\n      c5.appendChild(btn4);\n      document.getElementById('watchedTable').getElementsByTagName('tbody')[0].appendChild(row);\n    });\n  }\n  updateUserlist() {\n    this.movieService.users().subscribe(users => {\n      //console.log(\"USERLIST\",users);\n      let userTable = document.getElementById(\"settingsTable\");\n      let userBody = userTable.querySelector('tbody');\n      while (userBody.firstChild) {\n        userBody?.removeChild(userBody.firstChild);\n      }\n      users.forEach(user => {\n        let row = document.createElement('tr');\n        let c1 = row.appendChild(document.createElement('td'));\n        c1.innerHTML = \"\" + user.userName;\n        let c2 = row.appendChild(document.createElement('td'));\n        let btn = document.createElement('button');\n        btn.type = 'button';\n        btn.className = 'btn';\n        btn.style.color = \"black\";\n        btn.style.border = \"5px black solid\";\n        btn.style.borderRadius = \"30%\";\n        btn.addEventListener('click', () => {\n          this.disableUser(user);\n          if (btn.innerHTML == \"Enable\") {\n            btn.innerHTML = \"Disable\";\n            btn.style.backgroundColor = \"red\";\n          } else {\n            btn.innerHTML = \"Enable\";\n            btn.style.backgroundColor = \"lightgreen\";\n          }\n        });\n        if (user.disabled) {\n          btn.innerHTML = \"Enable\";\n          btn.style.backgroundColor = \"lightgreen\";\n        } else {\n          btn.innerHTML = \"Disable\";\n          btn.style.backgroundColor = \"red\";\n        }\n        c2.appendChild(btn);\n        document.getElementById('settingsTable').getElementsByTagName('tbody')[0].appendChild(row);\n      });\n    });\n  }\n  rewatch(movie) {\n    //console.log(\"REWATCHING \",movie); \n    this.curUser.watched.forEach(mov => {\n      if (movie.title == mov.title) {\n        this.movieService.rewatch(mov, this.curUser).subscribe(res => {\n          this.curUser = res;\n          this.updateUser(this.curUser);\n        });\n      }\n    });\n  }\n  addWatched(movie) {\n    //console.log(\"ADDING\",movie);\n    //this.printmovies();\n    this.remove('want', movie);\n    this.curUser.watched.push(movie);\n    this.updateUser(this.curUser);\n  }\n  seeDetails(list, movie) {\n    document.getElementById('title').innerHTML = movie.title;\n    document.getElementById('description').innerHTML = movie.description;\n    document.getElementById('released').innerHTML = movie.released;\n    if (list == \"want\") {\n      document.getElementById('watched').innerHTML = \"Haven't seen this one yet!\";\n    } else {\n      document.getElementById('watched').innerHTML = (\"\" + movie.watchDate).substring(0, 10);\n    }\n    this.detailsView();\n  }\n  remove(list, movie) {\n    //console.log(\"REMOVINGFROM\"+list, movie);\n    //this.printmovies();\n    if (list == \"want\") {\n      let c = 0;\n      this.curUser.want.forEach(rmovie => {\n        if (rmovie.title == movie.title) {\n          this.curUser.want.splice(c, 1);\n        }\n        c++;\n      });\n    } else {\n      //delete a watched\n      let c = 0;\n      this.curUser.watched.forEach(rmovie => {\n        if (rmovie.title == movie.title) {\n          this.curUser.watched.splice(c, 1);\n        }\n        c++;\n      });\n    }\n    //console.log(\"AFTER REMOVING\");\n    //this.printmovies();\n    this.updateUser(this.curUser);\n  }\n  filterBy(filter) {\n    this.movieService.sort(filter, this.curUser).subscribe(res => {\n      //console.log(\"newlyFILTERED\",res);\n      this.curUser = res;\n      this.updateLists();\n    });\n  }\n  disableUser(user) {\n    user.disabled = !user.disabled; //flip bool\n    //console.log(\"afterDISABLEUSER\",user);\n    this.updateUser(user);\n  }\n  updateUser(user) {\n    //console.log(\"UPDATINGUSER\",user );\n    this.movieService.update(user).subscribe(user => {\n      if (this.curUser._id == user._id) {\n        this.curUser = user;\n      }\n      this.cd.detectChanges();\n    });\n    this.updateLists();\n  }\n  watchedView() {\n    document.getElementById(\"nav\").style.display = \"block\";\n    document.getElementById(\"todoPage\").style.display = \"none\";\n    document.getElementById(\"watchedPage\").style.display = \"block\";\n    document.getElementById(\"loginPage\").style.display = \"none\";\n    document.getElementById(\"detailsPage\").style.display = \"none\";\n    document.getElementById(\"settingsPage\").style.display = \"none\";\n  }\n  todoView() {\n    document.getElementById(\"nav\").style.display = \"block\";\n    document.getElementById(\"todoPage\").style.display = \"block\";\n    document.getElementById(\"watchedPage\").style.display = \"none\";\n    document.getElementById(\"loginPage\").style.display = \"none\";\n    document.getElementById(\"detailsPage\").style.display = \"none\";\n    document.getElementById(\"settingsPage\").style.display = \"none\";\n  }\n  loginView() {\n    document.getElementById(\"nav\").style.display = \"none\";\n    document.getElementById(\"todoPage\").style.display = \"none\";\n    document.getElementById(\"watchedPage\").style.display = \"none\";\n    document.getElementById(\"loginPage\").style.display = \"block\";\n    document.getElementById(\"detailsPage\").style.display = \"none\";\n    document.getElementById(\"settingsPage\").style.display = \"none\";\n  }\n  detailsView() {\n    document.getElementById(\"nav\").style.display = \"block\";\n    document.getElementById(\"todoPage\").style.display = \"none\";\n    document.getElementById(\"watchedPage\").style.display = \"none\";\n    document.getElementById(\"loginPage\").style.display = \"none\";\n    document.getElementById(\"detailsPage\").style.display = \"block\";\n    document.getElementById(\"settingsPage\").style.display = \"none\";\n  }\n  settingsView() {\n    document.getElementById(\"nav\").style.display = \"block\";\n    document.getElementById(\"todoPage\").style.display = \"none\";\n    document.getElementById(\"watchedPage\").style.display = \"none\";\n    document.getElementById(\"loginPage\").style.display = \"none\";\n    document.getElementById(\"detailsPage\").style.display = \"none\";\n    document.getElementById(\"settingsPage\").style.display = \"block\";\n  }\n};\n__decorate([Input()], MoviesComponent.prototype, \"userName\", void 0);\n__decorate([Input()], MoviesComponent.prototype, \"password\", void 0);\nMoviesComponent = __decorate([Component({\n  selector: 'app-movies',\n  templateUrl: './movies.component.html',\n  styleUrls: ['./movies.component.css']\n})], MoviesComponent);\nexport { MoviesComponent };","map":{"version":3,"mappings":"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","names":["Component","Input","debounceTime","distinctUntilChanged","MoviesComponent","constructor","movieService","cd","_id","userName","password","admin","disabled","want","watched","ngOnInit","loginView","login","document","getElementById","value","subscribe","user","todoView","curUser","updateUserlist","updateUser","logout","printmovies","console","log","addWatched","watchlistMovie","searchInput","results","updateLists","onInputChange","length","searchMovie","pipe","searchResults","showDropdown","todoTable","todoBody","querySelector","firstChild","removeChild","watchedTable","watchedBody","wantMovies","watchedMovies","forEach","movie","row","createElement","c1","appendChild","innerHTML","title","c2","btn","type","className","style","color","backgroundColor","border","borderRadius","addEventListener","c3","btn2","seeDetails","c4","btn3","remove","getElementsByTagName","watchDate","substring","rewatch","c5","btn4","users","userTable","userBody","disableUser","mov","res","push","list","description","released","detailsView","c","rmovie","splice","filterBy","filter","sort","update","detectChanges","watchedView","display","settingsView","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["E:\\Code Things\\VSCode Files\\Watchlist-Website\\client\\src\\app\\movies\\movies.component.ts"],"sourcesContent":["import { Component, OnInit, Input , ChangeDetectorRef } from '@angular/core';\r\nimport  {debounceTime, distinctUntilChanged, switchMap} from 'rxjs/operators';\r\nimport { movie } from '../models/movie';\r\nimport { User } from '../models/user';\r\n\r\nimport { MovieService } from '../services/movie.service';\r\n\r\n@Component({\r\n  selector: 'app-movies',\r\n  templateUrl: './movies.component.html',\r\n  styleUrls: ['./movies.component.css']\r\n})\r\nexport class MoviesComponent implements OnInit{\r\n\r\n  @Input() userName? : string;\r\n  @Input() password? : string;\r\n\r\n  searchInput: string = '';\r\n  searchResults: any[] = [];\r\n  showDropdown: boolean = false;\r\n  highlightedIndex: number = -1;\r\n\r\n  constructor(\r\n    private movieService : MovieService,\r\n    private cd: ChangeDetectorRef\r\n  ){}\r\n  \r\n  public curUser:  User = {\r\n    _id: '',\r\n    userName: '',\r\n    password: '',\r\n    admin: false,\r\n    disabled: false,\r\n    want: [],\r\n    watched: []\r\n  };\r\n\r\n  ngOnInit(): void {\r\n      this.userName = \"admin\";\r\n      this.password = \"admin\";\r\n      this.loginView();\r\n  }\r\n  login() {\r\n    this.movieService.login((<HTMLInputElement>document.getElementById(\"userInput\")).value, (<HTMLInputElement>document.getElementById(\"passInput\")).value).subscribe(user =>{\r\n      if(user){\r\n        //console.log(\"logged in\",user);\r\n        this.todoView();\r\n        this.curUser = user;\r\n        this.updateUserlist();\r\n        this.updateUser(this.curUser)\r\n      }\r\n    });\r\n  }\r\n\r\n  logout(){\r\n    //console.log(\"LOGOUT\");\r\n    //reset local data\r\n    this.curUser = {\r\n      _id: '',\r\n      userName: '',\r\n      password: '',\r\n      admin: false,\r\n      disabled: false,\r\n      want: [],\r\n      watched: []\r\n    };\r\n    this.loginView();\r\n  }\r\n\r\n  printmovies(){\r\n    console.log(\"USER MOVIES ARE\");\r\n    console.log(this.curUser.want);\r\n    console.log(this.curUser.watched);\r\n  }\r\n\r\n  addWatched(){//movie is added to wants in server, user returned\r\n    //console.log(\"searching for\", this.searchInput);\r\n    //this.printmovies();\r\n\r\n    this.movieService.watchlistMovie(this.searchInput).subscribe(results => {\r\n      this.curUser = results;\r\n      this.updateLists();\r\n    });\r\n  }\r\n\r\n  onInputChange(){\r\n    if(this.searchInput.length > 2){\r\n      this.movieService.searchMovie(this.searchInput)\r\n        .pipe(\r\n          debounceTime(300),\r\n          distinctUntilChanged()\r\n        )\r\n        .subscribe(results =>{\r\n          this.searchResults = results;\r\n          this.showDropdown = true;\r\n        })\r\n    }\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  updateLists(){\r\n    //reset todoTable\r\n    let todoTable = document.getElementById(\"todoTable\") as HTMLTableElement;\r\n    let todoBody = todoTable.querySelector('tbody');\r\n    while(todoBody!.firstChild){\r\n      todoBody?.removeChild(todoBody.firstChild);\r\n    }\r\n    //reset watchedTable\r\n    let watchedTable = document.getElementById('watchedTable') as HTMLTableElement;\r\n    let watchedBody = watchedTable.querySelector('tbody');\r\n    while(watchedBody!.firstChild){\r\n      watchedBody?.removeChild(watchedBody.firstChild);\r\n    }\r\n    let wantMovies = this.curUser.want;\r\n    let watchedMovies = this.curUser.watched;\r\n    //Want Table Setup\r\n    wantMovies.forEach(movie =>{\r\n      let row = document.createElement('tr')\r\n      let c1 = row.appendChild(document.createElement('td'));\r\n      c1.innerHTML = movie.title;//div\r\n      let c2 = row.appendChild(document.createElement('td'));\r\n      let btn = document.createElement('button');\r\n      btn.type = 'button';\r\n      btn.className = 'btn';\r\n      btn.style.color = \"black\";\r\n      btn.style.backgroundColor = \"lightgrey\"\r\n      btn.style.border = \"5px black solid\"\r\n      btn.style.borderRadius = \"30%\";\r\n      btn.innerHTML = 'Add Watched'\r\n      btn.addEventListener('click', ()=>{\r\n        this.addWatched(movie);\r\n      })\r\n      c2.appendChild(btn);//div\r\n      let c3 = row.appendChild(document.createElement('td'));\r\n      let btn2 = document.createElement('button');\r\n      btn2.type = 'button';\r\n      btn2.className = 'btn';\r\n      btn2.style.color = \"black\";\r\n      btn2.style.backgroundColor = \"lightgrey\"\r\n      btn2.style.border = \"5px black solid\"\r\n      btn2.style.borderRadius = \"30%\";\r\n      btn2.addEventListener('click', () =>{\r\n        this.seeDetails(\"want\",movie);\r\n      })\r\n      btn2.innerHTML = 'See Details';\r\n      c3.appendChild(btn2);//div\r\n      let c4 = row.appendChild(document.createElement('td'));\r\n      let btn3 = document.createElement('button');\r\n      btn3.type = 'button';\r\n      btn3.className = 'btn';\r\n      btn3.style.color = \"black\";\r\n      btn3.style.backgroundColor = \"lightgrey\"\r\n      btn3.style.border = \"5px black solid\"\r\n      btn3.style.borderRadius = \"30%\";\r\n      btn3.addEventListener('click', ()=>{\r\n        this.remove(\"want\", movie);\r\n      })\r\n      btn3.innerHTML = 'Remove';\r\n      c4.appendChild(btn3);\r\n      document.getElementById('todoTable')!.getElementsByTagName('tbody')[0].appendChild(row);\r\n    })\r\n    //Watched table setup\r\n    watchedMovies.forEach(movie =>{\r\n      let row = document.createElement('tr')\r\n      let c1 = row.appendChild(document.createElement('td'));\r\n      c1.innerHTML = movie.title;\r\n      let c2 = row.appendChild(document.createElement('td'));\r\n      c2.innerHTML = (\"\"+movie.watchDate).substring(0,10);\r\n      let c3 = row.appendChild(document.createElement('td'));\r\n      let btn = document.createElement('button');\r\n      btn.type = 'button';\r\n      btn.className = 'btn';\r\n      btn.style.color = \"black\";\r\n      btn.style.backgroundColor = \"lightgrey\"\r\n      btn.style.border = \"5px black solid\"\r\n      btn.style.borderRadius = \"30%\";\r\n      btn.addEventListener('click', ()=>{\r\n        this.rewatch(movie);\r\n      })\r\n      btn.innerHTML = \"Rewatch\";\r\n      c3.appendChild(btn);\r\n      let c4 = row.appendChild(document.createElement('td'));\r\n      let btn3 = document.createElement('button');\r\n      btn3.type = 'button';\r\n      btn3.className = 'btn';\r\n      btn3.style.color = \"black\";\r\n      btn3.style.backgroundColor = \"lightgrey\"\r\n      btn3.style.border = \"5px black solid\"\r\n      btn3.style.borderRadius = \"30%\";\r\n      btn3.addEventListener('click', () =>{\r\n        this.seeDetails('',movie);\r\n      })\r\n      btn3.innerHTML = 'See Details';\r\n      c4.appendChild(btn3);\r\n      let c5 = row.appendChild(document.createElement('td'));\r\n      let btn4 = document.createElement('button');\r\n      btn4.type = 'button';\r\n      btn4.className = 'btn';\r\n      btn4.style.color = \"black\";\r\n      btn4.style.backgroundColor = \"lightgrey\"\r\n      btn4.style.border = \"5px black solid\"\r\n      btn4.style.borderRadius = \"30%\";\r\n      btn4.addEventListener('click', ()=>{\r\n        this.remove(\"watched\", movie);\r\n      })\r\n      btn4.innerHTML = 'Remove';\r\n      c5.appendChild(btn4);\r\n      document.getElementById('watchedTable')!.getElementsByTagName('tbody')[0].appendChild(row);\r\n    })\r\n  }\r\n\r\n  updateUserlist(){\r\n    this.movieService.users().subscribe(users=>{\r\n      //console.log(\"USERLIST\",users);\r\n      let userTable = document.getElementById(\"settingsTable\") as HTMLTableElement;\r\n      let userBody = userTable.querySelector('tbody');\r\n      while(userBody!.firstChild){\r\n        userBody?.removeChild(userBody.firstChild);\r\n      }\r\n\r\n      users.forEach(user =>{\r\n        let row = document.createElement('tr')\r\n        let c1 = row.appendChild(document.createElement('td'));\r\n        c1.innerHTML = \"\"+user.userName;\r\n        let c2 = row.appendChild(document.createElement('td'));\r\n        let btn = document.createElement('button');\r\n        btn.type = 'button';\r\n        btn.className = 'btn';\r\n        btn.style.color = \"black\";\r\n        btn.style.border = \"5px black solid\"\r\n        btn.style.borderRadius = \"30%\";\r\n        btn.addEventListener('click', ()=>{\r\n          this.disableUser(user);\r\n          if(btn.innerHTML == \"Enable\"){\r\n            btn.innerHTML = \"Disable\";\r\n            btn.style.backgroundColor = \"red\";\r\n          }else{\r\n            btn.innerHTML = \"Enable\";\r\n            btn.style.backgroundColor = \"lightgreen\";\r\n          }\r\n        })\r\n        if(user.disabled){\r\n          btn.innerHTML = \"Enable\";\r\n          btn.style.backgroundColor = \"lightgreen\";\r\n        }else{\r\n          btn.innerHTML = \"Disable\";\r\n          btn.style.backgroundColor = \"red\";\r\n        }\r\n        c2.appendChild(btn);\r\n        document.getElementById('settingsTable')!.getElementsByTagName('tbody')[0].appendChild(row);\r\n      })\r\n    })\r\n  }\r\n\r\n  rewatch(movie : movie){ \r\n    //console.log(\"REWATCHING \",movie); \r\n    this.curUser.watched.forEach(mov =>{\r\n      if(movie.title == mov.title){\r\n          this.movieService.rewatch(mov,this.curUser).subscribe((res)=>{ // returns updated user\r\n          this.curUser = res;\r\n          this.updateUser(this.curUser);\r\n        });\r\n      }\r\n    });\r\n  }\r\n  addWatched(movie : movie){\r\n    //console.log(\"ADDING\",movie);\r\n    //this.printmovies();\r\n    this.remove('want',movie);\r\n    this.curUser.watched.push(movie);\r\n    this.updateUser(this.curUser);\r\n  }\r\n  seeDetails(list:string, movie : movie){\r\n    document.getElementById('title')!.innerHTML = movie.title;\r\n    document.getElementById('description')!.innerHTML = movie.description;\r\n    document.getElementById('released')!.innerHTML = movie.released;\r\n    if(list == \"want\"){\r\n      document.getElementById('watched')!.innerHTML = \"Haven't seen this one yet!\";\r\n    }else{\r\n      document.getElementById('watched')!.innerHTML = (\"\"+movie.watchDate).substring(0,10);\r\n    } \r\n    this.detailsView();\r\n  }\r\n  remove(list : string, movie : movie){//list= want else watched\r\n    //console.log(\"REMOVINGFROM\"+list, movie);\r\n    //this.printmovies();\r\n    if(list == \"want\"){\r\n      let c=0;\r\n      this.curUser.want.forEach(rmovie =>{\r\n        if(rmovie.title == movie.title){\r\n          this.curUser.want.splice(c,1)\r\n        }\r\n        c++;\r\n      })\r\n    }else{//delete a watched\r\n      let c=0;\r\n      this.curUser.watched.forEach(rmovie =>{\r\n        if(rmovie.title == movie.title){\r\n          this.curUser.watched.splice(c,1)\r\n        }\r\n        c++;\r\n      })\r\n    }\r\n    //console.log(\"AFTER REMOVING\");\r\n    //this.printmovies();\r\n    this.updateUser(this.curUser);\r\n  }\r\n\r\n  filterBy(filter:string){//watched page\r\n    this.movieService.sort(filter,this.curUser).subscribe(res=>{//returns user with ordered watched[]\r\n      //console.log(\"newlyFILTERED\",res);\r\n      this.curUser=res;\r\n      this.updateLists();\r\n    })\r\n  }\r\n\r\n  disableUser(user : User){//settings only admin\r\n    \r\n    user.disabled = !user.disabled;//flip bool\r\n    //console.log(\"afterDISABLEUSER\",user);\r\n    this.updateUser(user);\r\n  }\r\n  updateUser(user : User){\r\n    //console.log(\"UPDATINGUSER\",user );\r\n    this.movieService.update(user).subscribe(user=>{\r\n      if(this.curUser._id == user._id){\r\n        this.curUser=user;\r\n      }\r\n      this.cd.detectChanges();\r\n    });\r\n    this.updateLists();\r\n  }\r\n\r\n\r\n\r\n  watchedView(){\r\n    document.getElementById(\"nav\")!.style.display=\"block\";\r\n    document.getElementById(\"todoPage\")!.style.display=\"none\";\r\n    document.getElementById(\"watchedPage\")!.style.display=\"block\";\r\n    document.getElementById(\"loginPage\")!.style.display=\"none\";\r\n    document.getElementById(\"detailsPage\")!.style.display=\"none\";\r\n    document.getElementById(\"settingsPage\")!.style.display=\"none\";\r\n  }\r\n  todoView(){\r\n    document.getElementById(\"nav\")!.style.display=\"block\";\r\n    document.getElementById(\"todoPage\")!.style.display=\"block\";\r\n    document.getElementById(\"watchedPage\")!.style.display=\"none\";\r\n    document.getElementById(\"loginPage\")!.style.display=\"none\";\r\n    document.getElementById(\"detailsPage\")!.style.display=\"none\";\r\n    document.getElementById(\"settingsPage\")!.style.display=\"none\";\r\n  }\r\n  loginView(){\r\n    document.getElementById(\"nav\")!.style.display=\"none\";\r\n    document.getElementById(\"todoPage\")!.style.display=\"none\";\r\n    document.getElementById(\"watchedPage\")!.style.display=\"none\";\r\n    document.getElementById(\"loginPage\")!.style.display=\"block\";\r\n    document.getElementById(\"detailsPage\")!.style.display=\"none\";\r\n    document.getElementById(\"settingsPage\")!.style.display=\"none\";\r\n  }\r\n  detailsView(){\r\n    document.getElementById(\"nav\")!.style.display=\"block\";\r\n    document.getElementById(\"todoPage\")!.style.display=\"none\";\r\n    document.getElementById(\"watchedPage\")!.style.display=\"none\";\r\n    document.getElementById(\"loginPage\")!.style.display=\"none\";\r\n    document.getElementById(\"detailsPage\")!.style.display=\"block\";\r\n    document.getElementById(\"settingsPage\")!.style.display=\"none\";\r\n\r\n  }\r\n  settingsView(){\r\n    document.getElementById(\"nav\")!.style.display=\"block\";\r\n    document.getElementById(\"todoPage\")!.style.display=\"none\";\r\n    document.getElementById(\"watchedPage\")!.style.display=\"none\";\r\n    document.getElementById(\"loginPage\")!.style.display=\"none\";\r\n    document.getElementById(\"detailsPage\")!.style.display=\"none\";\r\n    document.getElementById(\"settingsPage\")!.style.display=\"block\";\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}